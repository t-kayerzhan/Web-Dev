<!DOCTYPE html>
<script>
    "use strict";

    // TASK: Create a date
    let date1 = new Date(2012, 1, 20, 3, 12);
    alert(date1); // Feb 20, 2012, 3:12am

    // TASK: Show a weekday
    function getWeekDay(date) {
        let days = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];
        return days[date.getDay()];
    }

    let date2 = new Date(2012, 0, 3); // 3 Jan 2012
    alert(getWeekDay(date2)); // TU

    // TASK: European weekday
    function getLocalDay(date) {
        let day = date.getDay();
        return day === 0 ? 7 : day;
    }

    let date3 = new Date(2012, 0, 3); // 3 Jan 2012
    alert(getLocalDay(date3)); // 2

    // TASK: Which day of month was many days ago?
    function getDateAgo(date, days) {
        let dateCopy = new Date(date);
        dateCopy.setDate(date.getDate() - days);
        return dateCopy.getDate();
    }

    let date4 = new Date(2015, 0, 2);
    alert(getDateAgo(date4, 1)); // 1
    alert(getDateAgo(date4, 2)); // 31
    alert(getDateAgo(date4, 365)); // 2

    // TASK: Last day of month?
    function getLastDayOfMonth(year, month) {
        return new Date(year, month + 1, 0).getDate();
    }

    alert(getLastDayOfMonth(2012, 1)); // 29 (Feb, leap year)
    alert(getLastDayOfMonth(2024, 1)); // 29 (Feb, leap year)
    alert(getLastDayOfMonth(2023, 1)); // 28 (Feb, non-leap year)
    alert(getLastDayOfMonth(2023, 0)); // 31 (Jan)

    // TASK: How many seconds have passed today?
    function getSecondsToday() {
        let now = new Date();
        let today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        return Math.floor((now - today) / 1000);
    }

    alert(getSecondsToday());

    // TASK: How many seconds till tomorrow?
    function getSecondsToTomorrow() {
        let now = new Date();
        let tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
        return Math.floor((tomorrow - now) / 1000);
    }

    alert(getSecondsToTomorrow());

    // TASK: Format the relative date
    function formatDate(date) {
        let diff = new Date() - date;
        
        if (diff < 1000) return "right now";
        
        let sec = Math.floor(diff / 1000);
        if (sec < 60) return sec + " sec. ago";
        
        let min = Math.floor(diff / 60000);
        if (min < 60) return min + " min. ago";
        
        let d = date;
        let day = d.getDate().toString().padStart(2, '0');
        let month = (d.getMonth() + 1).toString().padStart(2, '0');
        let year = d.getFullYear().toString().slice(-2);
        let hours = d.getHours().toString().padStart(2, '0');
        let minutes = d.getMinutes().toString().padStart(2, '0');
        
        return `${day}.${month}.${year} ${hours}:${minutes}`;
    }

    alert(formatDate(new Date(new Date - 1))); // "right now"
    alert(formatDate(new Date(new Date - 30 * 1000))); // "30 sec. ago"
    alert(formatDate(new Date(new Date - 5 * 60 * 1000))); // "5 min. ago"
    alert(formatDate(new Date(new Date - 86400 * 1000))); // yesterday
</script>